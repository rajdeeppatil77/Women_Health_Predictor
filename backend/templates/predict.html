{% extends "base.html" %}

{% block content %}
<div class="glass-container" style="max-width: 800px;">
    <h2 style="text-align: center; margin-bottom: 2rem;">Health Checkup Form</h2>
    <form id="predictForm">
        <div class="grid-container" style="grid-template-columns: 1fr 1fr; padding: 0;">
            <div class="form-group">
                <label>Do you feel constantly tired? (Fatigue)</label>
                <select name="fatigue">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>
            <div class="form-group">
                <label>Are your periods irregular?</label>
                <select name="irregular_periods">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>
            <div class="form-group">
                <label>Have you gained weight suddenly?</label>
                <select name="weight_gain">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>
            <div class="form-group">
                <label>Are you experiencing hair loss?</label>
                <select name="hair_loss">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>
            <div class="form-group">
                <label>Excess hair growth on face/body?</label>
                <select name="excess_hair_growth">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>
            <div class="form-group">
                <label>Do you have mood swings?</label>
                <select name="mood_swings">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>
            <div class="form-group">
                <label>Do you have pelvic pain?</label>
                <select name="pelvic_pain">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>
            <div class="form-group">
                <label>Any lump in breast? (Self-check)</label>
                <select name="lump_in_breast">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>
            <div class="form-group">
                <label>Frequent urination?</label>
                <select name="frequent_urination">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>
            <div class="form-group">
                <label>Excessive thirst?</label>
                <select name="thirst">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label>Do you have nausea or morning sickness?</label>
            <select name="nausea">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Have you missed your period?</label>
            <select name="missed_period">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Have you lost weight without trying?</label>
            <select name="unexplained_weight_loss">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have recurring fever?</label>
            <select name="recurring_fever">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Are your lymph nodes swollen?</label>
            <select name="swollen_lymph_nodes">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you feel burning during urination?</label>
            <select name="burning_urination">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Is your urine cloudy or strong-smelling?</label>
            <select name="cloudy_urine">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you experience abnormal vaginal bleeding?</label>
            <select name="abnormal_bleeding">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you experience vaginal itching?</label>
            <select name="vaginal_itching">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have abnormal vaginal discharge?</label>
            <select name="abnormal_discharge">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Does the discharge have a strong/fishy odor?</label>
            <select name="fishy_odor">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have hot flashes?</label>
            <select name="hot_flashes">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you experience night sweats?</label>
            <select name="night_sweats">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have swelling in your legs/feet?</label>
            <select name="swelling_legs">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have severe headaches?</label>
            <select name="severe_headache">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have constant bone or joint pain?</label>
            <select name="bone_pain">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you feel muscle weakness?</label>
            <select name="muscle_weakness">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Any nipple discharge?</label>
            <select name="nipple_discharge">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have high blood pressure?</label>
            <select name="high_bp">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>

        <!-- Infectious Diseases -->
        <div class="form-group">
            <label>Do you have high fever with chills?</label>
            <select name="high_fever">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have a persistent cough (more than 2 weeks)?</label>
            <select name="persistent_cough">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you see blood in your sputum/cough?</label>
            <select name="blood_in_sputum">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have severe joint pain (breakbone fever)?</label>
            <select name="severe_joint_pain">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have stomach pain with prolonged fever?</label>
            <select name="stomach_pain_fever">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>

        <!-- Reproductive & Maternal -->
        <div class="form-group">
            <label>Have you been unable to conceive for >1 year?</label>
            <select name="difficulty_conceiving">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have genital warts or bumps?</label>
            <select name="genital_warts">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Are you currently pregnant?</label>
            <select name="is_pregnant">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>If pregnant: Do you have high blood sugar?</label>
            <select name="gestational_diabetes_symptoms">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>If pregnant/post-birth: Do you have high fever and foul discharge?</label>
            <select name="maternal_sepsis_symptoms">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>

        <!-- Nutritional -->
        <div class="form-group">
            <label>Do you feel numbness or tingling in hands/feet?</label>
            <select name="numbness_tingling">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Is your skin very pale or yellowish?</label>
            <select name="pale_skin">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have a swelling in your neck (Goiter)?</label>
            <select name="neck_swelling">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have brittle nails and hair?</label>
            <select name="brittle_nails">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>

        <!-- Mental Health -->
        <div class="form-group">
            <label>Do you feel persistent sadness or hopelessness?</label>
            <select name="persistent_sadness">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Do you have excessive worry or panic attacks?</label>
            <select name="anxiety_panic">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
        <div class="form-group">
            <label>Did you recently give birth and feel severe sadness?</label>
            <select name="postpartum_sadness">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select>
        </div>
</div>
<div style="text-align: center; margin-top: 2rem;">
    <button type="submit" class="btn">Analyze Symptoms</button>
</div>
</form>

<div id="result"
    style="display: none; margin-top: 2rem; padding: 1rem; background: #fff; border-radius: 10px; border-left: 5px solid var(--primary);">
    <h3 id="predictionText"></h3>
    <p id="recommendationText"></p>
</div>
</div>

<script>
    document.getElementById('predictForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);
        const data = {};
        formData.forEach((value, key) => data[key] = parseInt(value));

        try {
            const response = await fetch('/api/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            const result = await response.json();

            document.getElementById('result').style.display = 'block';

            // Translate dynamic results
            const prediction = window.translateText ? window.translateText(result.prediction) : result.prediction;
            const recommendation = window.translateText ? window.translateText(result.recommendation) : result.recommendation;

            const resultLabel = window.translateText ? window.translateText("Result: ") : "Result: ";
            const adviceLabel = window.translateText ? window.translateText("Advice: ") : "Advice: ";

            document.getElementById('predictionText').innerText = resultLabel + prediction;
            document.getElementById('recommendationText').innerText = adviceLabel + recommendation;
        } catch (error) {
            alert('Error connecting to server');
        }
    });
</script>
{% endblock %}